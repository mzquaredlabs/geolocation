(function(){"use strict";var e={3452:function(e,n,t){var o=t(7764),r=t(8808),a=t(4108);function i(e,n,t,o,r,i){const s=(0,a.E1)("router-view");return(0,a.Wz)(),(0,a.Az)(s)}var s={name:"App"},c=t(4100);const u=(0,c.c)(s,[["render",i]]);var l=u,d=t(7464),p=t(9096);const f=e=>((0,a.ED)("data-v-c46a8c4c"),e=e(),(0,a.ii)(),e),g={class:"login-container"},m=f((()=>(0,a.QD)("h2",null,"Login",-1))),h={class:"input-group"},v=f((()=>(0,a.QD)("label",{for:"username"},"Username",-1))),b={class:"input-group"},y=f((()=>(0,a.QD)("label",{for:"password"},"Password",-1))),w={key:0};function O(e,n,t,r,i,s){return(0,a.Wz)(),(0,a.An)("div",g,[(0,a.QD)("form",{class:"login-form",onSubmit:n[3]||(n[3]=(0,o.Y7)(((...e)=>s.login&&s.login(...e)),["prevent"]))},[m,(0,a.QD)("div",h,[v,(0,a.wt)((0,a.QD)("input",{type:"text",id:"username","onUpdate:modelValue":n[0]||(n[0]=e=>i.credentials.username=e),required:""},null,512),[[o.Og,i.credentials.username]])]),(0,a.QD)("div",b,[y,(0,a.wt)((0,a.QD)("input",{type:"password",id:"password","onUpdate:modelValue":n[1]||(n[1]=e=>i.credentials.password=e),required:""},null,512),[[o.Og,i.credentials.password]])]),(0,a.QD)("button",{type:"submit",onClick:n[2]||(n[2]=(...e)=>s.login&&s.login(...e))},"Login"),s.ifError?((0,a.Wz)(),(0,a.An)("p",w,(0,p.WA)(s.ifError),1)):(0,a.g1)("",!0)],32)])}t(3248);var D=t(2964);const L=(0,r.O6)("auth",{state:()=>({userData:null,token:null,isLoggedIn:!1,loginError:null}),actions:{async login(e,n,t,o,r){try{const a=await D.c.post("https://mzquared.com/attend-api/v1/public/attendlogin",{email:e,password:n,deviceInfo:t,latitude:o,longitude:r});a.data.success&&(this.userData=a.data.data.attendUser,this.token=a.data.data.auth.token,this.isLoggedIn=!0)}catch(a){this.loginError="Access restricted. Please contact support for assistance."}}}});var E={name:"LoginComponent",data(){return{credentials:{username:"",password:""},deviceInfo:navigator.userAgent,latitude:"",longitude:"",accuracy:""}},methods:{async login(){const e=L();try{await e.login(this.credentials.username,this.credentials.password,this.deviceInfo,this.latitude,this.longitude),e.userData&&(console.log("Login successful",e.userData),this.toHome())}catch(n){alert(n),console.error("Login failed:",n)}},getLocation(){navigator.geolocation.getCurrentPosition(this.success,this.error,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},success(e){const n=e.coords;this.latitude=n.latitude,this.longitude=n.longitude,this.accuracy=`${n.accuracy} meters `},error(e){console.warn(`ERROR(${e.code}): ${e.message}`)},toHome(){this.$router.push({name:"HomeComponent"})}},computed:{ifError(){const e=L();return e.loginError}},mounted(){this.getLocation()}};const k=(0,c.c)(E,[["render",O],["__scopeId","data-v-c46a8c4c"]]);var A=k;const Q={class:"wrapper"};function j(e,n,t,o,r,i){return(0,a.Wz)(),(0,a.An)("div",Q)}var C={name:"HomeComponent"};const I=(0,c.c)(C,[["render",j],["__scopeId","data-v-964bbd1e"]]);var _=I;const x=[{path:"/",name:"Login",component:A},{path:"/home",name:"HomeComponent",component:_}],z=(0,d.gv)({history:(0,d.oz)(),routes:x});z.beforeEach(((e,n,t)=>{const o=L(),r=o.isLoggedIn;"Login"===e.name||r?t():t({name:"Login"})}));var P=z;const H=(0,o.W0)(l),S=(0,r.Kw)();H.use(S),H.use(P),H.mount("#app")}},n={};function t(o){var r=n[o];if(void 0!==r)return r.exports;var a=n[o]={exports:{}};return e[o].call(a.exports,a,a.exports,t),a.exports}t.m=e,function(){var e=[];t.O=function(n,o,r,a){if(!o){var i=1/0;for(l=0;l<e.length;l++){o=e[l][0],r=e[l][1],a=e[l][2];for(var s=!0,c=0;c<o.length;c++)(!1&a||i>=a)&&Object.keys(t.O).every((function(e){return t.O[e](o[c])}))?o.splice(c--,1):(s=!1,a<i&&(i=a));if(s){e.splice(l--,1);var u=r();void 0!==u&&(n=u)}}return n}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[o,r,a]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};t.O.j=function(n){return 0===e[n]};var n=function(n,o){var r,a,i=o[0],s=o[1],c=o[2],u=0;if(i.some((function(n){return 0!==e[n]}))){for(r in s)t.o(s,r)&&(t.m[r]=s[r]);if(c)var l=c(t)}for(n&&n(o);u<i.length;u++)a=i[u],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(l)},o=self["webpackChunkpunch"]=self["webpackChunkpunch"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=t.O(void 0,[999],(function(){return t(3452)}));o=t.O(o)})();
//# sourceMappingURL=app.05a011ce.js.map